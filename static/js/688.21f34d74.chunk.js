"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[688],{1623:function(e,s,t){t.d(s,{D:function(){return a}});var n=t(1413),r=(t(2791),t(9434)),o=t(7689),i=t(184);function a(e){return function(s){return(0,r.v9)((function(e){return e.auth.isAuth}))?(0,i.jsx)(e,(0,n.Z)({},s)):(0,i.jsx)(o.Fg,{to:"/login"})}}},9688:function(e,s,t){t.r(s),t.d(s,{default:function(){return Q}});var n=t(9439),r=t(2791),o=t(3411),i=t(8247),a=t(4200),l=t(5057),c=t(184),u=function(e){var s=(0,r.useState)(!1),t=(0,n.Z)(s,2),o=t[0],u=t[1],d=(0,r.useState)(e.status),f=(0,n.Z)(d,2),x=f[0],h=f[1],p=(0,i.T)();(0,r.useEffect)((function(){h(e.status)}),[e.status]);return e.isOwner&&o?(0,c.jsx)("div",{children:(0,c.jsx)(a.t,{onChange:function(e){h(e.currentTarget.value)},onBlur:function(){u(!1),p((0,l._D)(x))},autoFocus:!0,value:x})}):(0,c.jsxs)("div",{onClick:function(){e.isOwner&&u(!0)},children:[(0,c.jsx)("span",{children:"Status: "}),e.status]})},d=t(2329),f={descriptionBlock:"ProfileInfo_descriptionBlock__h+ube",userEditingData:"ProfileInfo_userEditingData__A6yWj",checkbox:"ProfileInfo_checkbox__UPLSv",formField:"ProfileInfo_formField__Ryhaq",userAvatar:"ProfileInfo_userAvatar__kqUMe",userStatus:"ProfileInfo_userStatus__EQPA7",uploadAvatar:"ProfileInfo_uploadAvatar__JDc7J",userData:"ProfileInfo_userData__Q7hTJ",contacts:"ProfileInfo_contacts__z4OPa"},x=t(1413),h=t(4165),p=t(5861),v=t(1134),j=t(9434),m=t(7503),_=t(1694),b=t.n(_),k=function(e){var s=(0,v.cI)({mode:"onBlur",defaultValues:e.profile}),t=s.register,r=s.handleSubmit,o=(0,i.T)(),a=function(){var s=(0,p.Z)((0,h.Z)().mark((function s(t){return(0,h.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,o((0,l.Ii)(t));case 2:"success"===s.sent&&e.deactivateEditMode();case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),u=(0,j.v9)((function(e){return e.profilePage.errorMessages}));return(0,c.jsxs)("form",{onSubmit:r(a),className:f.userEditingData,children:[(0,c.jsxs)("div",{className:f.formField,children:[(0,c.jsx)("div",{children:(0,c.jsx)("label",{htmlFor:"fullName",children:"Full Name:"})}),(0,c.jsx)("input",(0,x.Z)({id:"fullName",type:"text"},t("fullName")))]}),(0,c.jsxs)("div",{className:f.formField,children:[(0,c.jsx)("div",{children:(0,c.jsx)("label",{htmlFor:"aboutMe",children:"About me:"})}),(0,c.jsx)("input",(0,x.Z)({type:"text",id:"aboutMe"},t("aboutMe")))]}),(0,c.jsxs)("div",{className:b()(f.checkbox,f.formField),children:[(0,c.jsx)("span",{children:"Looking for a job:"}),(0,c.jsx)("input",(0,x.Z)({type:"checkbox",id:"lookingForAJob"},t("lookingForAJob"))),(0,c.jsx)("label",{htmlFor:"true"})]}),(0,c.jsxs)("div",{className:f.formField,children:[(0,c.jsx)("div",{children:(0,c.jsx)("label",{htmlFor:"lookingForAJobDescription",children:"My professional skills:"})}),(0,c.jsx)("input",(0,x.Z)({type:"textarea",id:"lookingForAJobDescription"},t("lookingForAJobDescription")))]}),Object.entries(e.profile.contacts).map((function(e,s){var r=(0,n.Z)(e,1)[0];return(0,c.jsxs)("div",{className:b()(f.contact,f.formField),children:[(0,c.jsx)("div",{children:(0,c.jsxs)("label",{htmlFor:"contact",children:[r,":"]})}),(0,c.jsx)("input",(0,x.Z)({type:"text"},t("contacts.".concat(r))))]},s)})),(0,c.jsx)("div",{children:u&&(0,c.jsx)("p",{style:{color:"red"},children:(null===u||void 0===u?void 0:u.join(", "))||"Error!"})}),(0,c.jsx)(m.O,{type:"submit",children:"Save changes"}),(0,c.jsx)("span",{children:(0,c.jsx)(m.O,{className:f.cancelChangesBtn,type:"button",onClick:function(){e.deactivateEditMode(),o(l.Nw.showErrorMessages(null))},children:"Cancel changes"})})]})},g=t(4164),N="Modal_modalOverlay__KEf+C",P="Modal_content__kT+Q+",y=function(e){if((0,r.useEffect)((function(){var s=function(s){"Escape"===s.key&&e.isOpen&&e.closeModal()};return window.addEventListener("keydown",s),function(){window.removeEventListener("keydown",s)}}),[e.closeModal,e.isOpen]),!e.isOpen)return null;var s=(0,c.jsx)("div",{className:N,onClick:e.closeModal,children:(0,c.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:P,children:e.children})});return(0,g.createPortal)(s,document.body)},M=function(e){return(0,c.jsxs)("div",{className:f.userData,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Full Name"}),": ",e.profile.fullName]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"About me"}),": ",e.profile.aboutMe]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Looking for a job"}),": ",e.profile.lookingForAJob?"Yes":"No"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"My Professional skills"}),": ",e.profile.lookingForAJobDescription]}),(0,c.jsxs)("div",{className:f.contacts,children:[(0,c.jsx)("b",{children:"Contacts"}),":",Object.entries(e.profile.contacts).map((function(e,s){var t=(0,n.Z)(e,2),r=t[0],o=t[1];return(0,c.jsx)(w,{contactTitle:r,contactValue:o},s)}))]}),e.isOwner&&(0,c.jsx)(m.O,{onClick:e.activateEditMode,children:"Edit your profile data"})]})},w=function(e){var s=e.contactTitle,t=e.contactValue;return(0,c.jsxs)("div",{className:f.contactList,children:[s,": ",t]})},F=function(e){var s=(0,r.useState)(!1),t=(0,n.Z)(s,2),a=t[0],x=t[1],h=(0,i.T)(),p=(0,r.useCallback)((function(){x(!1)}),[]);if(!e.profile)return(0,c.jsx)(o.Z,{});return(0,c.jsxs)("div",{className:f.descriptionBlock,children:[(0,c.jsxs)("div",{className:f.userAvatar,children:[(0,c.jsx)("img",{src:e.profile.photos.large||d,alt:"avatar"}),e.isOwner&&(0,c.jsxs)("div",{className:f.uploadAvatar,children:[(0,c.jsx)("label",{htmlFor:"avatar",children:e.profile.photos.large?"Update your photo":"Upload your photo"}),(0,c.jsx)("input",{type:"file",id:"avatar",name:"avatar",onChange:function(e){var s=e.target,t=s.files?s.files[0]:null;t&&h((0,l.Ju)(t))},hidden:!0})]}),(0,c.jsx)("div",{className:f.userStatus,children:(0,c.jsx)(u,{status:e.status,isOwner:e.isOwner})})]}),(0,c.jsx)(M,{profile:e.profile,isOwner:e.isOwner,activateEditMode:function(){x(!0)}}),(0,c.jsx)(y,{isOpen:a,closeModal:p,children:(0,c.jsx)(k,{profile:e.profile,deactivateEditMode:function(){x(!1)}})})]})},O=t(1623),E={profileContent:"Profile_profileContent__D-CRy",profilePosts:"Profile_profilePosts__o2O9x"},A="Post_item__+LbrZ",C="Post_avatar__lVSxM",Z="Post_postText__hWRA4",I="Post_likes__qO1MU",S=function(e){return(0,c.jsxs)("div",{className:A,children:[(0,c.jsx)("img",{src:d,className:C,alt:"user avatar"}),(0,c.jsx)("span",{className:Z,children:e.message}),(0,c.jsx)("div",{className:I,children:e.likes})]})},D="MyPosts_postsBlock__1SYB2",T="MyPosts_posts__avlut",J="MyPosts_addPost__P+SxH",B=t(8396),L=function(){var e=(0,v.cI)({mode:"onChange"}),s=e.reset,t=e.register,n=e.handleSubmit,r=e.formState.errors,o=(0,i.T)();return(0,c.jsxs)("form",{onSubmit:n((function(e){o(l.Nw.addPostActionCreator(e.postText)),s()})),className:J,children:[(0,c.jsx)(B.Z,(0,x.Z)((0,x.Z)({placeholder:"Enter your post"},t("postText",{required:"You cannot send an empty post"})),{},{customError:null!==r&&void 0!==r&&r.postText?(null===r||void 0===r?void 0:r.postText.message)||"Error!":null})),(0,c.jsx)("div",{children:(0,c.jsx)(m.O,{children:"Add post"})})]})},U=function(){var e=(0,j.v9)((function(e){return e.profilePage.posts})).map((function(e){return(0,c.jsx)(S,{message:e.message,likes:e.likes},e.id)}));return(0,c.jsxs)("div",{className:D,children:[(0,c.jsx)("h3",{children:"My Posts"}),(0,c.jsx)(L,{}),(0,c.jsx)("div",{className:T,children:e})]})},q=r.memo(U),V=t(7689),Q=(0,O.D)((function(){var e=(0,V.UO)(),s=(0,i.T)(),t=(0,j.v9)((function(e){return e.profilePage.status})),n=(0,j.v9)((function(e){return e.profilePage.profile})),o=(0,j.v9)((function(e){return e.auth.userId}));return(0,r.useEffect)((function(){var t=e.userId?+e.userId:null;t||(t=o),s((0,l.XG)(t)),s((0,l.tX)(t))}),[e.userId,s,o]),(0,r.useEffect)((function(){return function(){s(l.Nw.setUserProfile(null))}}),[s]),(0,c.jsxs)("div",{className:E.profileContent,children:[(0,c.jsx)("div",{className:E.profileInfo,children:(0,c.jsx)(F,{profile:n,status:t,isOwner:!e.userId})}),(0,c.jsx)("div",{className:E.profilePosts,children:(0,c.jsx)(q,{})})]})}))}}]);
//# sourceMappingURL=688.21f34d74.chunk.js.map